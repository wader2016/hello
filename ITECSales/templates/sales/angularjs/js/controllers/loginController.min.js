/*! test 05-04-2016 */
MetronicApp.controller("indexController",["$scope","$location","$window","authService",function(a,b,c,d){a.authentication=d.authentication,0==a.authentication.isAuth&&(d.logOut(),a.authentication.isAuth=!1,b.url("/Login/login.html"))}]),MetronicApp.controller("LoginController",["$scope","$location","$rootScope","authService","$http","apiUrl","localStorageService",function(a,b,c,d,e,f,g){d.authentication.isAuth?b.url("/sales/productList/all"):d.logOut(),a.loginData={userName:"",password:""},a.message="",a.login=function(){d.login(a.loginData).then(function(c){e.get("http://"+f+"/Api/api/v1/UserProfile").success(function(d){a.userProfile=d.Data,console.log(d.Data),null==g.get(c.userName+"image")&&g.set(c.userName+"image","/assets/admin/pages/media/profile/profile_user.jpg"),b.path("/sales/productList/all").replace(),top.location.reload()}).error(function(){d.logOut(),alertInfo.Error("登录失败!")})},function(b){a.message=b.error_description})}}]),MetronicApp.controller("SignUpController",["$http","$scope","$location","$timeout","authService",function(a,b,c,d,e){b.savedSuccessfully=!1,b.message="",b.registration={Email:"",password:"",confirmPassword:""},b.signUp=function(){e.saveRegistration(b.registration).then(function(a){b.savedSuccessfully=!0,b.message="注册成功！2秒中后跳转到登录页面",f()},function(a){var c=[];for(var d in a.data.modelState)for(var e=0;e<a.data.modelState[d].length;e++)c.push(a.data.modelState[d][e]);b.message="注册失败:"+c.join(" ")})};var f=function(){var a=d(function(){d.cancel(a),c.path("/login")},2e3)}}]);